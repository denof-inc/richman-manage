
# AIエージェント共通ルール（全プロジェクト適用）

以下のルールは、全エージェントが一貫して遵守すべき共通指針です。作業開始前に必ず読み込み、すべての対応に反映すること。

---

## 🧑‍💻 基本方針

- docs内にプロジェクトに関する要件や仕様をまとめているので、把握したうえで作業を進めること。
  - 永続的または重要な内容が確定したときはドキュメントを追加・更新する
- 同じ作業・修正が**3回以上発生している場合**、その都度対応せず、**根本原因を分析して対策を提案**すること。
- 作業時は常に**消費パワーが最も少ない方法（効率的なコマンド、再利用、キャッシュ）**を選び、無駄な手作業や非効率な流れを避ける。
- 「成功した方法・コマンド」は**積極的に再利用**し、毎回のやり直しを避ける。

---

## 🧪 テスト・品質

- **ユニットテスト**：関数・ロジック単位で必ず用意し、変更時は**追加・修正を必須**とする。
- **Lint・Format**：ESLint + Prettier（Airbnb準拠）。**`--fix`での自動修正後に手動対応も忘れないこと**。
- **スキップ禁止**：Lint・テストのスキップ、CIバイパスは禁止。**エラーはすべて修正した上でコミット・マージ**する。

---

## 🗂 Git運用ルール

- **コミット形式**：日本語の Conventional Commits を使用。例：
  - `feat: 新規物件登録ページの追加`
  - `fix: ログイン時に発生する403エラーの修正`
- **コミット粒度**：目的単位で分割。小さく、意味のある単位で行うこと。
- **ブランチ命名**：`feature/機能名` または `fix/バグ名` 形式。issueごとに独立ブランチで対応する。
- **マージ形式**：PR作成後、**squashマージ**で統合。GitHub Flowに従う。
- **Issue駆動**：全ての作業は GitHub Issue を起点とし、PRでクローズする（`closes #番号` をPRに記載）。
- **PR作成フロー**：
  - タイトルのみで一旦作成
  - 本文は `.md` ファイルで整備・推敲し、後から転記
  - CLIから直接長文を打ち込むのは禁止

---

## 📝 ドキュメント・コメント

- **設計や仕様の変更点**は必ず `README.md` または `docs/` 配下に記録すること。
- **コードコメント**は適宜日本語で追加し、**読み手が意図を正確に把握できるように配慮**する。

---

## 🎨 スタイル・UI

- UIは **shadcn/ui + Tailwind CSS** を使用。
- インラインスタイル、`style`属性の直接指定は禁止（例外を除く）。
- 一貫したデザインシステムに従い、**再利用可能なコンポーネント化を意識**する。

---

## 🚨 セキュリティ・プライバシー

- 個人情報・機密情報の取り扱いは**最優先で注意**すること。外部公開リポジトリに含めない。
- `.env` や秘密鍵・APIキー等は**絶対にGitに含めない**。

---

## 🧠 その他行動指針

- 不明点・疑問点がある場合は**独断で進めず、まずGitHubのissue/PR履歴を参照**し、必要に応じて相談・確認する。
- すべての作業・議論・決定事項は**GitHub上に記録を残す**こと。口頭や非公式チャットで済ませない。
- **`git status` でステージング状態を確認**し、不要ファイルのコミットや漏れを防ぐ。
